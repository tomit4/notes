(()=>{"use strict";var e,t={8921:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=n(7294),i=n(1181),o=n(5990);class a extends s.Component{constructor(e){super(e),this.state={}}render(){return s.createElement("table",{id:"categoryChooserTable",className:"categoryChooserTable"},s.createElement("tbody",null,s.createElement("tr",{id:"CategoryOptionsRow",className:"categoryTableElement categoryTableHeader"},s.createElement("th",{id:"CategoryOptionName"},chrome.i18n.getMessage("category")),s.createElement("th",{id:"CategorySkipOption",className:"skipOption"},chrome.i18n.getMessage("skipOption")),s.createElement("th",{id:"CategoryColorOption",className:"colorOption"},chrome.i18n.getMessage("seekBarColor")),s.createElement("th",{id:"CategoryPreviewColorOption",className:"previewColorOption"},chrome.i18n.getMessage("previewColor"))),this.getCategorySkipOptions()))}getCategorySkipOptions(){const e=[];for(const t of i.categoryList)e.push(s.createElement(o.default,{category:t,key:t}));return e}}t.default=a},5990:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=n(7294),i=n(7542),o=n(1181),a=n(7683),r=n(4980),l=n(6896),c=n(142),d=n(7947);class u extends s.Component{constructor(e){var t,n;super(e),this.state={color:e.defaultColor||(null===(t=i.default.config.barTypes[this.props.category])||void 0===t?void 0:t.color),previewColor:e.defaultPreviewColor||(null===(n=i.default.config.barTypes["preview-"+this.props.category])||void 0===n?void 0:n.color),hideChapter:!0},(0,c.fetchingChaptersAllowed)().then((e=>{this.setState({hideChapter:!e})}))}render(){this.state.hideChapter&&(0,c.fetchingChaptersAllowed)().then((e=>{e&&this.setState({hideChapter:!e})}));let e="disable";for(const t of i.default.config.categorySelections)if(t.name===this.props.category){switch(t.option){case a.CategorySkipOption.ShowOverlay:e="showOverlay";break;case a.CategorySkipOption.ManualSkip:e="manualSkip";break;case a.CategorySkipOption.AutoSkip:e="autoSkip"}break}let t="";const n="chapter"===this.props.category&&this.state.hideChapter;return n&&(t+=" disabled",!i.default.config.showUpsells)?s.createElement(s.Fragment,null):s.createElement(s.Fragment,null,s.createElement("tr",{id:this.props.category+"OptionsRow",className:`categoryTableElement${t}`},s.createElement("td",{id:this.props.category+"OptionName",className:"categoryTableLabel"},chrome.i18n.getMessage("category_"+this.props.category)),s.createElement("td",{id:this.props.category+"SkipOption",className:"skipOption"},s.createElement("select",{className:"optionsSelector",defaultValue:e,disabled:n,onChange:this.skipOptionSelected.bind(this)},this.getCategorySkipOptions()),n&&s.createElement(d.default,{className:"upsellButton",onClick:()=>chrome.tabs.create({url:chrome.runtime.getURL("upsell/index.html")})})),"chapter"!==this.props.category&&s.createElement("td",{id:this.props.category+"ColorOption",className:"colorOption"},s.createElement("input",{className:"categoryColorTextBox option-text-box",type:"color",disabled:n,onChange:e=>this.setColorState(e,!1),value:this.state.color})),!["chapter","exclusive_access"].includes(this.props.category)&&s.createElement("td",{id:this.props.category+"PreviewColorOption",className:"previewColorOption"},s.createElement("input",{className:"categoryColorTextBox option-text-box",type:"color",onChange:e=>this.setColorState(e,!0),value:this.state.previewColor}))),s.createElement("tr",{id:this.props.category+"DescriptionRow",className:`small-description categoryTableDescription${t}`},s.createElement("td",{colSpan:2},chrome.i18n.getMessage("category_"+this.props.category+"_description")," ",s.createElement("a",{href:o.wikiLinks[this.props.category],target:"_blank",rel:"noreferrer"},`${chrome.i18n.getMessage("LearnMore")}`))),this.getExtraOptionComponents(this.props.category,t,n))}skipOptionSelected(e){let t;switch(e.target.value){case"disable":return void(i.default.config.categorySelections=i.default.config.categorySelections.filter((e=>e.name!==this.props.category)));case"showOverlay":t=a.CategorySkipOption.ShowOverlay;break;case"manualSkip":t=a.CategorySkipOption.ManualSkip;break;case"autoSkip":t=a.CategorySkipOption.AutoSkip}const n=i.default.config.categorySelections.find((e=>e.name===this.props.category));n?n.option=t:i.default.config.categorySelections.push({name:this.props.category,option:t}),i.default.forceSyncUpdate("categorySelections")}getCategorySkipOptions(){const e=[];let t=["disable","showOverlay","manualSkip","autoSkip"];("chapter"===this.props.category||"exclusive_access"===this.props.category)&&(t=["disable","showOverlay"]);for(const n of t)e.push(s.createElement("option",{key:n,value:n},chrome.i18n.getMessage("disable"!==n?n+(0,r.getCategorySuffix)(this.props.category):n)));return e}setColorState(e,t){clearTimeout(this.setBarColorTimeout),t?(this.setState({previewColor:e.currentTarget.value}),i.default.config.barTypes["preview-"+this.props.category].color=e.currentTarget.value):(this.setState({color:e.currentTarget.value}),i.default.config.barTypes[this.props.category].color=e.currentTarget.value),this.setBarColorTimeout=setTimeout((()=>{i.default.config.barTypes=i.default.config.barTypes}),50)}getExtraOptionComponents(e,t,n){const i=[];for(const o of this.getExtraOptions(e))i.push(s.createElement("tr",{key:o.configKey,className:t},s.createElement("td",{id:`${e}_${o.configKey}`,className:"categoryExtraOptions"},s.createElement(l.default,{configKey:o.configKey,label:o.label,disabled:!o.dontDisable&&n,style:{width:"inherit"}}))));return i}getExtraOptions(e){switch(e){case"chapter":return[{configKey:"renderSegmentsAsChapters",label:chrome.i18n.getMessage("renderAsChapters"),dontDisable:!0},{configKey:"showSegmentNameInChapterBar",label:chrome.i18n.getMessage("showSegmentNameInChapterBar"),dontDisable:!0}];case"music_offtopic":return[{configKey:"autoSkipOnMusicVideos",label:chrome.i18n.getMessage("autoSkipOnMusicVideos")}];default:return[]}}}t.default=u},7507:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=n(7294),i=n(745),o=n(7542),a=n(2239),r=n(7657);let l,c;class d extends s.Component{constructor(e){super(e),this.state={keybind:o.default.config[this.props.option]}}render(){var e,t,n,i,o,a,l;return s.createElement(s.Fragment,null,s.createElement("div",{className:"keybind-buttons inline",title:chrome.i18n.getMessage("change"),onClick:()=>this.openEditDialog()},(null===(e=this.state.keybind)||void 0===e?void 0:e.ctrl)&&s.createElement("div",{className:"key keyControl"},"Ctrl"),(null===(t=this.state.keybind)||void 0===t?void 0:t.ctrl)&&s.createElement("span",{className:"keyControl"},"+"),(null===(n=this.state.keybind)||void 0===n?void 0:n.alt)&&s.createElement("div",{className:"key keyAlt"},"Alt"),(null===(i=this.state.keybind)||void 0===i?void 0:i.alt)&&s.createElement("span",{className:"keyAlt"},"+"),(null===(o=this.state.keybind)||void 0===o?void 0:o.shift)&&s.createElement("div",{className:"key keyShift"},"Shift"),(null===(a=this.state.keybind)||void 0===a?void 0:a.shift)&&s.createElement("span",{className:"keyShift"},"+"),null!=(null===(l=this.state.keybind)||void 0===l?void 0:l.key)&&s.createElement("div",{className:"key keyBase"},(0,r.formatKey)(this.state.keybind.key)),null==this.state.keybind&&s.createElement("span",{className:"unbound"},chrome.i18n.getMessage("notSet"))),null!=this.state.keybind&&s.createElement("div",{className:"option-button trigger-button inline",onClick:()=>this.unbind()},chrome.i18n.getMessage("unbind")))}equals(e){return(0,r.keybindEquals)(this.state.keybind,e)}toString(){return(0,r.keybindToString)(this.state.keybind)}openEditDialog(){l=parent.document.createElement("div"),l.id="keybind-dialog",parent.document.body.prepend(l),c=(0,i.createRoot)(l),c.render(s.createElement(a.default,{option:this.props.option,closeListener:e=>this.closeEditDialog(e)}))}closeEditDialog(e){c.unmount(),l.remove(),null!=e&&this.setState({keybind:e})}unbind(){this.setState({keybind:null}),o.default.config[this.props.option]=null}}t.default=d},2239:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=n(7294),i=n(7542),o=n(7657);class a extends s.Component{constructor(e){super(e),this.keybindKeyPressed=e=>{if(!(e.altKey||e.shiftKey||e.ctrlKey||e.metaKey||e.getModifierState("AltGraph"))){if("Escape"==e.code)return void this.props.closeListener(null);this.setState({key:{key:e.key,code:e.code,ctrl:this.state.key.ctrl,alt:this.state.key.alt,shift:this.state.key.shift}},(()=>this.setState({error:this.isKeybindAvailable()})))}},this.keybindModifierChecked=e=>{const t=e.target.id,n=e.target.checked;this.setState({key:{key:this.state.key.key,code:this.state.key.code,ctrl:"change-keybind-ctrl"==t?n:this.state.key.ctrl,alt:"change-keybind-alt"==t?n:this.state.key.alt,shift:"change-keybind-shift"==t?n:this.state.key.shift}},(()=>this.setState({error:this.isKeybindAvailable()})))},this.state={key:{key:null,code:null,ctrl:!1,alt:!1,shift:!1},error:{message:null,blocking:!1}}}render(){var e,t;return s.createElement(s.Fragment,null,s.createElement("div",{className:"blocker"}),s.createElement("div",{className:"dialog"},s.createElement("div",{id:"change-keybind-description"},chrome.i18n.getMessage("keybindDescription")),s.createElement("div",{id:"change-keybind-settings"},s.createElement("div",{id:"change-keybind-modifiers",className:"inline"},s.createElement("div",null,s.createElement("input",{id:"change-keybind-ctrl",type:"checkbox",onChange:this.keybindModifierChecked}),s.createElement("label",{htmlFor:"change-keybind-ctrl"},"Ctrl")),s.createElement("div",null,s.createElement("input",{id:"change-keybind-alt",type:"checkbox",onChange:this.keybindModifierChecked}),s.createElement("label",{htmlFor:"change-keybind-alt"},"Alt")),s.createElement("div",null,s.createElement("input",{id:"change-keybind-shift",type:"checkbox",onChange:this.keybindModifierChecked}),s.createElement("label",{htmlFor:"change-keybind-shift"},"Shift"))),s.createElement("div",{className:"key inline"},(0,o.formatKey)(this.state.key.key))),s.createElement("div",{id:"change-keybind-error"},null===(e=this.state.error)||void 0===e?void 0:e.message),s.createElement("div",{id:"change-keybind-buttons"},s.createElement("div",{className:"option-button save-button inline"+((null===(t=this.state.error)||void 0===t?void 0:t.blocking)||null==this.state.key.key?" disabled":""),onClick:()=>this.save()},chrome.i18n.getMessage("save")),s.createElement("div",{className:"option-button cancel-button inline",onClick:()=>this.props.closeListener(null)},chrome.i18n.getMessage("cancel")))))}componentDidMount(){parent.document.addEventListener("keydown",this.keybindKeyPressed),document.addEventListener("keydown",this.keybindKeyPressed)}componentWillUnmount(){parent.document.removeEventListener("keydown",this.keybindKeyPressed),document.removeEventListener("keydown",this.keybindKeyPressed)}isKeybindAvailable(){if(null==this.state.key.key)return null;let e;e=/[a-zA-Z0-9,.+\-\][:]/.test(this.state.key.key)?[{key:"k"},{key:"j"},{key:"l"},{key:"p",shift:!0},{key:"n",shift:!0},{key:","},{key:"."},{key:",",shift:!0},{key:".",shift:!0},{key:"ArrowRight"},{key:"ArrowLeft"},{key:"ArrowUp"},{key:"ArrowDown"},{key:"ArrowRight",ctrl:!0},{key:"ArrowLeft",ctrl:!0},{key:"c"},{key:"o"},{key:"w"},{key:"+"},{key:"-"},{key:"f"},{key:"t"},{key:"i"},{key:"m"},{key:"a"},{key:"s"},{key:"d"},{key:"Home"},{key:"End"},{key:"0"},{key:"1"},{key:"2"},{key:"3"},{key:"4"},{key:"5"},{key:"6"},{key:"7"},{key:"8"},{key:"9"},{key:"]"},{key:"["}]:[{key:null,code:"KeyK"},{key:null,code:"KeyJ"},{key:null,code:"KeyL"},{key:null,code:"KeyP",shift:!0},{key:null,code:"KeyN",shift:!0},{key:null,code:"Comma"},{key:null,code:"Period"},{key:null,code:"Comma",shift:!0},{key:null,code:"Period",shift:!0},{key:null,code:"Space"},{key:null,code:"KeyC"},{key:null,code:"KeyO"},{key:null,code:"KeyW"},{key:null,code:"Equal"},{key:null,code:"Minus"},{key:null,code:"KeyF"},{key:null,code:"KeyT"},{key:null,code:"KeyI"},{key:null,code:"KeyM"},{key:null,code:"KeyA"},{key:null,code:"KeyS"},{key:null,code:"KeyD"},{key:null,code:"BracketLeft"},{key:null,code:"BracketRight"}];for(const t of e){const e=Object.assign({},t);if(/[0-9]/.test(this.state.key.key)||(e.shift=!0),this.equals(t)||this.equals(e))return{message:chrome.i18n.getMessage("youtubeKeybindWarning"),blocking:!1}}return"skipKeybind"!=this.props.option&&this.equals(i.default.config.skipKeybind)||"submitKeybind"!=this.props.option&&this.equals(i.default.config.submitKeybind)||"startSponsorKeybind"!=this.props.option&&this.equals(i.default.config.startSponsorKeybind)?{message:chrome.i18n.getMessage("keyAlreadyUsed"),blocking:!0}:null}equals(e){return(0,o.keybindEquals)(this.state.key,e)}save(){var e;null==this.state.key.key||(null===(e=this.state.error)||void 0===e?void 0:e.blocking)||(i.default.config[this.props.option]=this.state.key,this.props.closeListener(this.state.key))}}t.default=a},6896:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=n(7294),i=n(7542);class o extends s.Component{constructor(e){super(e),this.state={enabled:i.default.config[e.configKey]}}render(){return s.createElement("div",{className:"sb-toggle-option "+(this.props.disabled?"disabled":"")},s.createElement("div",{className:"switch-container",style:this.props.style},s.createElement("label",{className:"switch"},s.createElement("input",{id:this.props.configKey,type:"checkbox",checked:this.state.enabled,disabled:this.props.disabled,onChange:e=>this.clicked(e)}),s.createElement("span",{className:"slider round"})),s.createElement("label",{className:"switch-label",htmlFor:this.props.configKey},this.props.label)))}clicked(e){i.default.config[this.props.configKey]=e.target.checked,this.setState({enabled:e.target.checked})}}t.default=o},8131:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=n(7294),i=n(7542),o=n(406);class a extends s.Component{constructor(e){super(e),this.state={}}render(){return 0==Object.keys(i.default.config.unsubmittedSegments).length?s.createElement(s.Fragment,null):s.createElement("table",{id:"unsubmittedVideosList",className:"categoryChooserTable",style:{marginTop:"10px"}},s.createElement("tbody",null,s.createElement("tr",{id:"UnsubmittedVideosListHeader",className:"categoryTableElement categoryTableHeader"},s.createElement("th",{id:"UnsubmittedVideoID"},chrome.i18n.getMessage("videoID")),s.createElement("th",{id:"UnsubmittedSegmentCount"},chrome.i18n.getMessage("segmentCount")),s.createElement("th",{id:"UnsubmittedVideoActions"},chrome.i18n.getMessage("actions"))),this.getUnsubmittedVideos()))}getUnsubmittedVideos(){const e=[];for(const t of Object.keys(i.default.config.unsubmittedSegments))e.push(s.createElement(o.default,{videoID:t,key:t}));return e}}t.default=a},406:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=n(7294),i=n(7542),o=n(2432);class a extends s.Component{constructor(e){super(e),this.state={}}render(){var e,t;const n=null!==(t=null===(e=i.default.config.unsubmittedSegments[this.props.videoID])||void 0===e?void 0:e.length)&&void 0!==t?t:0;return s.createElement(s.Fragment,null,s.createElement("tr",{id:this.props.videoID+"UnsubmittedSegmentsRow",className:"categoryTableElement"},s.createElement("td",{id:this.props.videoID+"UnsubmittedVideoID",className:"categoryTableLabel"},s.createElement("a",{href:`https://youtu.be/${this.props.videoID}`,target:"_blank",rel:"noreferrer"},this.props.videoID)),s.createElement("td",{id:this.props.videoID+"UnsubmittedSegmentCount"},n),s.createElement("td",{id:this.props.videoID+"UnsubmittedVideoActions"},s.createElement("div",{id:this.props.videoID+"ExportSegmentsAction",className:"option-button inline low-profile",onClick:this.exportSegments.bind(this)},chrome.i18n.getMessage("exportSegments"))," ",s.createElement("div",{id:this.props.videoID+"ExportSegmentsAsURLAction",className:"option-button inline low-profile",onClick:this.exportSegmentsAsURL.bind(this)},chrome.i18n.getMessage("exportSegmentsAsURL"))," ",s.createElement("div",{id:this.props.videoID+"ClearSegmentsAction",className:"option-button inline low-profile",onClick:this.clearSegments.bind(this)},chrome.i18n.getMessage("clearTimes")))))}clearSegments(){confirm(chrome.i18n.getMessage("clearThis"))&&(delete i.default.config.unsubmittedSegments[this.props.videoID],i.default.forceSyncUpdate("unsubmittedSegments"))}exportSegments(){this.copyToClipboard((0,o.exportTimes)(i.default.config.unsubmittedSegments[this.props.videoID]))}exportSegmentsAsURL(){this.copyToClipboard(`https://youtube.com/watch?v=${this.props.videoID}${(0,o.exportTimesAsHashParam)(i.default.config.unsubmittedSegments[this.props.videoID])}`)}copyToClipboard(e){navigator.clipboard.writeText(e).then((()=>{alert(chrome.i18n.getMessage("CopiedExclamation"))})).catch((()=>{alert(chrome.i18n.getMessage("copyDebugInformationFailed"))}))}}t.default=a},6129:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=n(7294),i=n(7542),o=n(8131);class a extends s.Component{constructor(e){super(e),this.state={tableVisible:!1}}render(){const e=Object.keys(i.default.config.unsubmittedSegments).length,t=Object.values(i.default.config.unsubmittedSegments).reduce(((e,t)=>e+t.length),0);return s.createElement(s.Fragment,null,s.createElement("div",{style:{marginBottom:"10px"}},0==t?chrome.i18n.getMessage("unsubmittedSegmentCountsZero"):chrome.i18n.getMessage("unsubmittedSegmentCounts").replace("{0}",`${t} ${chrome.i18n.getMessage("unsubmittedSegments"+(1==t?"Singular":"Plural"))}`).replace("{1}",`${e} ${chrome.i18n.getMessage("videos"+(1==e?"Singular":"Plural"))}`)),e>0&&s.createElement("div",{className:"option-button inline",onClick:()=>this.setState({tableVisible:!this.state.tableVisible})},chrome.i18n.getMessage(this.state.tableVisible?"hideUnsubmittedSegments":"showUnsubmittedSegments"))," ",s.createElement("div",{className:"option-button inline",onClick:this.clearAllSegments},chrome.i18n.getMessage("clearUnsubmittedSegments")),this.state.tableVisible&&s.createElement(o.default,null))}clearAllSegments(){confirm(chrome.i18n.getMessage("clearUnsubmittedSegmentsConfirm"))&&(i.default.config.unsubmittedSegments={})}}t.default=a},8450:function(e,t,n){var s=this&&this.__awaiter||function(e,t,n,s){return new(n||(n=Promise))((function(i,o){function a(e){try{l(s.next(e))}catch(e){o(e)}}function r(e){try{l(s.throw(e))}catch(e){o(e)}}function l(e){var t;e.done?i(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,r)}l((s=s.apply(e,t||[])).next())}))};Object.defineProperty(t,"__esModule",{value:!0});const i=n(7294),o=n(745),a=n(7542),r=n(1181),l=n(2938);window.SB=a.default;const c=n(3147),d=n(8298),u=n(2721),h=n(7507),g=n(7657),m=n(7707),p=new c.default;let y=!1;const f=[],k=[];function b(){const e=document.getElementById("options-container"),t=document.getElementById("options");!y&&window.pageYOffset>90&&(window.innerHeight<=770||window.innerWidth<=1200)?e.classList.contains("sticky")||(t.style.marginTop=t.offsetTop.toString()+"px",e.classList.add("sticky")):(t.style.marginTop="unset",e.classList.remove("sticky"))}function v(e){return s(this,void 0,void 0,(function*(){return"true"===e.getAttribute("data-private-only")&&!(yield new Promise((e=>chrome.extension.isAllowedIncognitoAccess(e))))||"true"===e.getAttribute("data-no-safari")&&"Apple Computer, Inc."===navigator.vendor}))}function S(e){const t=document.getElementById("options").querySelectorAll("*");for(let e=0;e<t.length;e++)"display"===t[e].getAttribute("data-type")&&E(t[e]);if(e.categorySelections||e.payments)for(const e of f)e.update();else if(e.unsubmittedSegments)for(const e of k)e.update()}function E(e){const t=e.getAttribute("data-sync"),n=a.default.config[t];switch(e.innerText=n,t){case"invidiousInstances":{e.innerText=n.join(", ");let t=n.length==l.length;for(let e=0;e<l.length&&t;e++)n[e]!=l[e]&&(t=!1);t||e.parentElement.querySelector(".invidious-instance-reset").classList.remove("hidden");break}}}function C(e,t){const n=e.querySelector(".option-text-box"),i=e.querySelector(".trigger-button"),o=e.querySelector(".text-change-set"),r=e.querySelector(".text-change-reset"),c=e.querySelector(".invidious-instance-reset");o.addEventListener("click",(function(){return s(this,void 0,void 0,(function*(){if(""==n.value||n.value.includes("/")||n.value.includes("http"))alert(chrome.i18n.getMessage("addInvidiousInstanceError"));else{let s=a.default.config[t];s||(s=[]),s.push(n.value),a.default.config[t]=s;const o=document.querySelector("#support-invidious input");o.checked=!0,O(o,"supportInvidious"),c.classList.remove("hidden"),n.value="",e.querySelector(".option-hidden-section").classList.add("hidden"),i.classList.remove("disabled")}}))})),r.addEventListener("click",(function(){return s(this,void 0,void 0,(function*(){n.value="",e.querySelector(".option-hidden-section").classList.add("hidden"),i.classList.remove("disabled")}))})),c.addEventListener("click",(function(){confirm(chrome.i18n.getMessage("resetInvidiousInstanceAlert"))&&(a.default.config[t]=l,c.classList.add("hidden"))}))}function w(e,t){p.containsInvidiousPermission().then((n=>{n!=e.checked&&(a.default.config[t]=n,e.checked=n)}))}function O(e,t){return s(this,void 0,void 0,(function*(){const n=yield p.applyInvidiousPermissions(e.checked,t);e.checked=n}))}function L(e){const t=e.querySelector(".trigger-button");if(t.classList.contains("disabled"))return;t.classList.add("disabled");const n=e.querySelector(".option-text-box"),i=e.getAttribute("data-sync");if("invidiousInstances"===i)return void e.querySelector(".option-hidden-section").classList.remove("hidden");let o=a.default.config[i];"*"===i&&(o=JSON.stringify(a.default.cachedSyncConfig)),n.value=o;const r=e.querySelector(".text-change-set");r.addEventListener("click",(()=>s(this,void 0,void 0,(function*(){A(i,e,n.value)})))),"userID"===i&&a.default.config[i]&&p.asyncRequestToServer("GET","/api/userInfo",{userID:a.default.config[i],values:["warnings","banned"]}).then((e=>{const t=JSON.parse(e.responseText);(t.warnings>0||t.banned)&&r.classList.add("hidden")})),e.querySelector(".option-hidden-section").classList.remove("hidden")}function A(e,t,n,i){return s(this,void 0,void 0,(function*(){const s=t.getAttribute("data-confirm-message");if(null===s||confirm(chrome.i18n.getMessage(s)))if("*"===e)try{const e=JSON.parse(n);for(const t in e)a.default.config[t]=e[t];if(e.supportInvidious){const e=document.querySelector("#support-invidious > div > label > input");e.checked=!0,yield O(e,"supportInvidious")}window.location.reload()}catch(e){alert(chrome.i18n.getMessage("incorrectlyFormattedOptions"))}else a.default.config[e]=n;else"function"==typeof i&&i()}))}function M(){const e=document.createElement("a"),t=JSON.parse(JSON.stringify(a.default.cachedSyncConfig)),n=(new Date).toJSON().replace("T","_").replace(/:/g,".").replace(/.\d+Z/g,"");e.setAttribute("href",`data:text/json;charset=utf-8,${encodeURIComponent(JSON.stringify(t))}`),e.setAttribute("download",`SponsorBlockConfig_${n}.json`),document.body.append(e),e.click(),e.remove()}function x(e){if(1==e.target.files.length){const t=e.target.files[0],n=new FileReader,s=document.querySelector("[data-sync='*']");n.onload=function(t){A("*",s,t.target.result,(()=>{e.target.value=null}))},n.readAsText(t)}}function N(){const e={debug:{userAgent:navigator.userAgent,platform:navigator.platform,language:navigator.language,extensionVersion:chrome.runtime.getManifest().version},config:JSON.parse(JSON.stringify(a.default.cachedSyncConfig))};delete e.config.userID,e.config.serverAddress=e.config.serverAddress===r.serverAddress?"Default server address":"Custom server address",e.config.invidiousInstances=e.config.invidiousInstances.length,e.config.whitelistedChannels=e.config.whitelistedChannels.length,navigator.clipboard.writeText(JSON.stringify(e,null,4)).then((()=>{alert(chrome.i18n.getMessage("copyDebugInformationComplete"))})).catch((()=>{alert(chrome.i18n.getMessage("copyDebugInformationFailed"))}))}window.addEventListener("DOMContentLoaded",(function(){return s(this,void 0,void 0,(function*(){if((0,m.localizeHtmlPage)(),""!=location.hash){const e=location.hash.slice(1);let t=document.querySelector(`[data-for='${e}']`);null==t&&(t=document.querySelector("[data-for='behavior']")),t.classList.add("selected")}else document.querySelector("[data-for='behavior']").classList.add("selected");if(document.getElementById("version").innerText="v. "+chrome.runtime.getManifest().version,"#embed"===window.location.hash){y=!0;for(const e of document.getElementsByClassName("titleBar"))e.classList.add("hidden");document.getElementById("options").classList.add("embed"),b()}a.default.configSyncListeners.includes(S)||a.default.configSyncListeners.push(S),yield p.wait((()=>null!==a.default.config)),a.default.config.darkMode||document.documentElement.setAttribute("data-theme","light");const e=document.getElementById("sbDonate");e.addEventListener("click",(()=>a.default.config.donateClicked=a.default.config.donateClicked+1)),(0,g.showDonationLink)()||e.classList.add("hidden");const t=document.getElementById("options"),n=t.querySelectorAll("*");for(let e=0;e<n.length;e++){const r=n[e].getAttribute("data-dependent-on"),l=t.querySelector(`[data-sync='${r}']`);let c=!1;if(l&&(c="reverse"===l.getAttribute("data-toggle-type")||"true"===n[e].getAttribute("data-dependent-on-inverted")),((yield v(n[e]))||l&&(c?a.default.config[r]:!a.default.config[r]))&&(n[e].classList.add("hidden","hiding"),!l))continue;const g=n[e].getAttribute("data-sync");switch(n[e].getAttribute("data-type")){case"toggle":{const i=a.default.config[g],o=n[e].querySelector("input"),r="reverse"===n[e].getAttribute("data-toggle-type"),l=n[e].getAttribute("data-confirm-message"),c="false"!==n[e].getAttribute("data-confirm-on");null!=i&&(o.checked=r?!i:i),"supportInvidious"===g&&w(o,g),o.addEventListener("click",(()=>s(this,void 0,void 0,(function*(){if(l&&(c&&o.checked||!c&&!o.checked)&&!confirm(chrome.i18n.getMessage(l)))return void(o.checked=!o.checked);switch(a.default.config[g]=r?!o.checked:o.checked,g){case"supportInvidious":O(o,g);break;case"disableAutoSkip":o.checked||(a.default.config.dontShowNotice=!1,document.querySelector("[data-sync='dontShowNotice'] > div > label > input").checked=!0);break;case"showDonationLink":o.checked?document.getElementById("sbDonate").classList.add("hidden"):document.getElementById("sbDonate").classList.remove("hidden");break;case"darkMode":o.checked?document.documentElement.setAttribute("data-theme","dark"):document.documentElement.setAttribute("data-theme","light");break;case"trackDownvotes":o.checked||(a.default.local.downvotedSegments={})}const e=t.querySelectorAll(`[data-dependent-on='${g}']`);for(let t=0;t<e.length;t++){const n="true"===e[t].getAttribute("data-dependent-on-inverted");!(yield v(e[t]))&&(!n&&o.checked||n&&!o.checked)?(e[t].classList.remove("hidden"),setTimeout((()=>e[t].classList.remove("hiding")),1)):(e[t].classList.add("hiding"),setTimeout((()=>e[t].classList.add("hidden")),400))}}))));break}case"text-change":{const t=n[e].querySelector(".option-text-box"),i=n[e].querySelector(".text-change-set");t.value=a.default.config[g],i.addEventListener("click",(()=>s(this,void 0,void 0,(function*(){switch(g){case"serverAddress":{const n=(e=(e=(e=t.value).trim()).replace(/\/+$/,"")).startsWith("https://")||e.startsWith("http://")?e:(alert(chrome.i18n.getMessage("customAddressError")),null);if(null===n)return;if(t.value=n,p.isFirefox()&&!(yield new Promise((e=>{chrome.permissions.request({origins:[t.value+"/"],permissions:[]},e)}))))return;break}}var e;a.default.config[g]=t.value})))),n[e].querySelector(".text-change-reset").addEventListener("click",(()=>{confirm(chrome.i18n.getMessage("areYouSureReset"))&&(a.default.config[g]=a.default.syncDefaults[g],t.value=a.default.config[g])}));break}case"private-text-change":{n[e].querySelector(".trigger-button").addEventListener("click",(()=>L(n[e]))),"*"==g&&(n[e].querySelector(".download-button").addEventListener("click",M),n[e].querySelector(".upload-button").addEventListener("change",(e=>x(e))));const t=n[e].getAttribute("data-sync");"invidiousInstances"===t&&C(n[e],t);break}case"button-press":{const t=n[e].querySelector(".trigger-button"),s=n[e].getAttribute("data-confirm-message");t.addEventListener("click",(()=>{if(null===s||confirm(chrome.i18n.getMessage(s)))switch(n[e].getAttribute("data-sync")){case"copyDebugInformation":N();break;case"resetToDefault":a.default.resetToDefault(),window.location.reload()}}));break}case"keybind-change":(0,o.createRoot)(n[e].querySelector("div")).render(i.createElement(h.default,{option:g}));break;case"display":E(n[e]);break;case"number-change":{const t=a.default.config[g],s=n[e].querySelector("input");isNaN(t)||t<0?s.value=a.default.syncDefaults[g]:s.value=t,s.addEventListener("input",(()=>{a.default.config[g]=s.value}));break}case"selector":{const t=a.default.config[g],s=n[e].querySelector(".selector-element");s.value=t,s.addEventListener("change",(()=>{let e=s.value;isNaN(Number(e))||(e=Number(e)),a.default.config[g]=e}));break}case"react-CategoryChooserComponent":f.push(new d.default(n[e]));break;case"react-UnsubmittedVideosComponent":k.push(new u.default(n[e]))}}const r=document.getElementsByClassName("tab-heading");for(let e=0;e<r.length;e++){const n=r[e].getAttribute("data-for");r[e].classList.contains("selected")&&document.getElementById(n).classList.remove("hidden"),r[e].addEventListener("click",(()=>{y||(location.hash=n),b(),document.querySelectorAll(".tab-heading").forEach((e=>{e.classList.remove("selected")})),t.querySelectorAll(".option-group").forEach((e=>{e.classList.add("hidden")})),r[e].classList.add("selected"),document.getElementById(n).classList.remove("hidden")}))}window.addEventListener("scroll",(()=>b())),t.classList.add("animated")}))}))},8298:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=n(7294),i=n(745),o=n(8921);t.default=class{constructor(e){this.ref=s.createRef(),(0,i.createRoot)(e).render(s.createElement(o.default,{ref:this.ref}))}update(){var e;null===(e=this.ref.current)||void 0===e||e.forceUpdate()}}},2721:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=n(7294),i=n(745),o=n(6129);t.default=class{constructor(e){this.ref=s.createRef(),(0,i.createRoot)(e).render(s.createElement(o.default,{ref:this.ref}))}update(){var e;null===(e=this.ref.current)||void 0===e||e.forceUpdate()}}},7947:(e,t,n)=>{Object.defineProperty(t,"__esModule",{value:!0});const s=n(7294);t.default=({fill:e="#fcba03",className:t="",width:n="20",height:i="20",onClick:o})=>s.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",height:n,width:i,className:t,fill:e,onClick:o},s.createElement("path",{d:"M5.5 18q-.625 0-1.062-.438Q4 17.125 4 16.5v-8q0-.625.438-1.062Q4.875 7 5.5 7H6V5q0-1.667 1.167-2.833Q8.333 1 10 1q1.667 0 2.833 1.167Q14 3.333 14 5v2h.5q.625 0 1.062.438Q16 7.875 16 8.5v8q0 .625-.438 1.062Q15.125 18 14.5 18Zm4.5-4q.625 0 1.062-.438.438-.437.438-1.062t-.438-1.062Q10.625 11 10 11t-1.062.438Q8.5 11.875 8.5 12.5t.438 1.062Q9.375 14 10 14ZM7.5 7h5V5q0-1.042-.729-1.771Q11.042 2.5 10 2.5q-1.042 0-1.771.729Q7.5 3.958 7.5 5Z"}))}},n={};function s(e){var i=n[e];if(void 0!==i)return i.exports;var o=n[e]={exports:{}};return t[e].call(o.exports,o,o.exports,s),o.exports}s.m=t,e=[],s.O=(t,n,i,o)=>{if(!n){var a=1/0;for(d=0;d<e.length;d++){for(var[n,i,o]=e[d],r=!0,l=0;l<n.length;l++)(!1&o||a>=o)&&Object.keys(s.O).every((e=>s.O[e](n[l])))?n.splice(l--,1):(r=!1,o<a&&(a=o));if(r){e.splice(d--,1);var c=i();void 0!==c&&(t=c)}}return t}o=o||0;for(var d=e.length;d>0&&e[d-1][2]>o;d--)e[d]=e[d-1];e[d]=[n,i,o]},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={798:0};s.O.j=t=>0===e[t];var t=(t,n)=>{var i,o,[a,r,l]=n,c=0;if(a.some((t=>0!==e[t]))){for(i in r)s.o(r,i)&&(s.m[i]=r[i]);if(l)var d=l(s)}for(t&&t(n);c<a.length;c++)o=a[c],s.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return s.O(d)},n=self.webpackChunksponsorblock=self.webpackChunksponsorblock||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var i=s.O(void 0,[736],(()=>s(8450)));i=s.O(i)})();